{% extends "base" %}

{% block head %}
{% include 'head' %}
<title>test</title>
{% endblock %}
{% block body %}
<div class="bg-gray-100 flex items-center justify-center h-screen">
  <button class="sidebar-toggle sidebar-closed p-2 rounded-md hover:bg-gray-100" onclick="exec()">
    exec
  </button>
  <div id="blocklyDiv" style="height: 480px; width: 1000px;"></div>
  <script>
    var workspace = Blockly.inject('blocklyDiv',                                                  // ライブラリに読み込ませる
      { toolbox: {
        "kind": "categoryToolbox",
        "contents": [
          {
            "kind": "category",
            "name": "core",
            "contents": [
              {
                "kind": "block",
                "type": "a_block"
              },
              {
                "kind": "block",
                "type": "b_block"
              },
              {
                "kind": "block",
                "type": "start_block"
              }
            ]
          }
        ]
      } });

    function exec() {
      Blockly.JavaScript.addReservedWords('code');
      var code = Blockly.JavaScript.workspaceToCode(workspace);
      workspace.addChangeListener(Blockly.Events.disableOrphans);
      try {
        alert(code);
      } catch (e) {
        alert(e);
      }
    }
  </script>
</div>
{% endblock %}